<!--/*
* Copyright (c) 2021 Huawei Device Co., Ltd.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/-->
<element name='receive' src='../component/receive/receive.hml'></element>
<element name="msgHighlight" src="../component/msg_highlight/msg_highlight.hml"></element>
<element name="highlightDialog"  src="../component/highlight_dialog/highlight_dialog.hml"></element>
<div class="chat-msg-page">
    <!-- 上方titleBar (tab全屏时)-->
    <div if="{{tabSlideStatus == 2}}" class="title-bar">
        <!--返回按钮-->
        <image class="chat-msg-back" id="back_icon" onclick="onBackPress" src="/common/icon/ic_back.svg"/>
        <text class="title-text"> {{strTabTitleText}}</text>
        <image show="{{tabIndex==1}}" class="image-more" onclick="onBackPress" src="/common/icon/ic_tab_image_check.svg"/>
    </div>
    <!--上方titleBar (收件人)-->
    <div elif="{{isNewMsg}}" class="title-bar-new">
        <div class="chat-msg-back-container" onclick="titleBarBack">
            <image class="chat-msg-back" src="/common/icon/ic_back.svg"/>
        </div>
        <text class="title-text">{{$t('strings.new_message')}}</text>
    </div>
    <!--上方titleBar-->
    <div else class="title-bar">
        <!--多选状态-->
        <image show="{{isSelectStatus}}" class="chat-msg-back" onclick="titleBarCancel" id="select_status_cancel"
                src='/common/icon/ic_cancel_black.svg'/>
        <text show="{{isSelectStatus}}" class="chat-msg-title">
            {{selectDeleteMsgCount==0 ? $t('strings.msg_unselected_tip') : $t('strings.msg_selected_tip', {number:selectDeleteMsgCount}) }}
        </text>
        <!--返回按钮-->
        <div class="chat-msg-back-div" id="chat_msg_back" onclick="titleBarBack">
            <image show="{{!isSelectStatus}}" class="chat-msg-back" src="/common/icon/ic_back.svg"/>
        </div>
        <!--联系人头像-->
        <div if="{{!isSelectStatus && contactsNum == 1}}" class="chat-msg-avatar-div" id="chat_msg_avatar">
            <image src="/common/icon/user_avatar_full_fill.svg" class="chat-msg-avatar" onclick="titleBarAvatar"/>
        </div>
        <!--联系人名称/号码-->
        <div class="chat-msg-contact" show="{{!isSelectStatus}}">
            <div if="{{contactsNum > 1}}" class="chat-msg-contact">
                <text class="chat-msg-contact-name">{{strContactsName}}</text>
                <text class="chat-msg-contact-number">{{$t('strings.members', {count: contactsNum})}}</text>
            </div>
            <div elif="{{strContactsName == '' || strContactsName == null}}" class="chat-msg-contact">
                <text class="chat-msg-contact-number-single">{{strContactsNumberFormat}}</text>
            </div>
            <div else class="chat-msg-contact">
                <text class="chat-msg-contact-name">{{strContactsName}}</text>
                <text class="chat-msg-contact-number">{{strContactsNumberFormat}}</text>
            </div>
        </div>
        <!--phone-->
        <div class="image-phone-div">
            <image id="phone" src="/common/icon/icon_phone.svg" class="image-phone" show="{{!isSelectStatus && contactsNum == 1}}" @click="clickCall"/>
        </div>
        <!--更多按钮-->
        <div class="image-more-div" if="{{!isSelectStatus}}">
            <image if="{{contactsNum > 1}}" id="groupMore" src="/common/icon/msg_more_false.svg" class="image-more" />
            <image if="{{contactsNum == 1 && hasExitContract}}" id="exitContract" src="/common/icon/msg_more_false.svg" class="image-more"/>
            <image if="{{contactsNum == 1 && !hasExitContract}}" id="more" src="/common/icon/msg_more_false.svg" class="image-more"/>
        </div>
    </div>
    <!--收件人-->
    <receive if="{{isNewMsg}}" @event-receive="setReceiveContactValue" param-contact="{{paramContact}}"></receive>
    <!--右上角更多按钮-->
    <menu target="more" onselected="longPressMore">
        <option value="0">{{$t('strings.delete')}}</option>
        <option value="1">{{$t('strings.msg_new_contact')}}</option>
        <option value="2">{{$t('strings.msg_save_to_an_existing_contact')}}</option>
        <option value="3">{{$t('strings.msg_pre_call_editor')}}</option>
    </menu>
    <!--右上角更多按钮-->
    <menu target="exitContract" onselected="longPressMore">
        <option value="0">{{$t('strings.delete')}}</option>
        <option value="5">{{$t('strings.view_contact')}}</option>
        <option value="3">{{$t('strings.msg_pre_call_editor')}}</option>
        <option value="4">{{$t('strings.msg_blacklist')}}</option>
    </menu>
    <!--右上角更多按钮-->
    <menu target="groupMore" onselected="longPressGroupMore">
        <option value="0">{{$t('strings.delete')}}</option>
        <option value="1">{{$t('strings.recipients')}}</option>
    </menu>
    <!--信息列表-->
    <list if="{{!isNewMsg}}" class="{{distanceBottomFlag ? 'chat-msg-list-flag' : 'chat-msg-list'}}" scrollbar="auto"
          initialindex="{{mmsList.length - 1}}" id="conversationList">
    <!--信息列表左右Item-->
        <list-item for="{{mmsList}}" onlongpress="mmsListLongPress({{$idx}})" ontouchstart="touchStart" class="list-item">
        <!--收信息Item-->
            <div if="{{$item.isReceive}}" class="mms-receive" onclick="detail({{$item}})">
            <!--短信/彩信-->
                <text class="msg-note-mms" show="{{$idx == 0}}">{{$t('strings.msg_note_mms')}}</text>
            <!--时间-->
                <text if="{{!mmsDateSet.has($item.date) && mmsDateSet.add($item.date)}}" class="mms-date" id="date_id">
                    {{$item.date}}</text>
                <div class="mms-status-content">
                    <div class="mms-status">
                    <!-- 信息/复选框-->
                        <div class="mms-text" if="{{$item.msgShowType==0||$item.msgShowType==4}}">
                            <image if="{{$item.msgType==1}}" src="{{$item.msgUriPath}}"
                                   class="mms-img-base mms-image" onclick="showMsgImage({{$idx}})"/>
                            <div elif="{{$item.msgType==3}}" onclick="playMsgAudio({{$idx}})"
                                 class="mms-edit-area-audio" style="width: 150px;">
                                <text class="mms-edit-audio-text"> {{$item.audioTime}}</text>
                                <image src="/common/icon/ic_voice_right.svg" class="mms-edit-audio-delete"/>
                            </div>
                            <div elif="{{$item.msgType==2}}" onclick="showVideoOperation({{$idx}})">
                                <image class="mms-video-base" src="{{$item.msgUriPath}}"/>
                                <image class="mms-video-tag" src="/common/icon/ic_play_tag.svg"/>
                            </div>
                            <div elif="{{$item.msgType==5}}" class="mms-edit-card">
                                <image src="/common/icon/msg_contacts.svg" class="edit-card-img"/>
                                <div class="mms-edit-card-item">
                                    <text class="mms-edit-card-text">{{$item.msgUriPath}}</text>
                                    <text class="mms-edit-card-text" if="{{$item.audioTime!=''}}">{{$item.audioTime}}</text>
                                </div>
                            </div>
                            <text if="{{$item.content!=''}}" class="mms-text-left mms-text-base" id="left_content"
                                  onclick="intentTextSelect({{$idx}})" style="margin-top: 10px;">
                                <msghighlight text="{{$item.content}}" keyword="{{searchContent}}" @click-highlights="clickHighlights"></msghighlight>
                            </text>
                        </div>
                        <div class="mms-send-text-left-row" elif="{{$item.msgShowType==1||$item.msgShowType==2}}"
                             @click="clickMms({{$item}}, true)">
                            <image class="ppt-image" src="/common/icon/ppt.svg"></image>
                            <div class="theme-text" if="{{$item.content!=''}}">
                                <text>
                                    <msghighlight text="{{$item.content}}" keyword="{{searchContent}}" @click-highlights="clickHighlights"></msghighlight>
                                </text>
                            </div>
                        </div>
                        <div else class="mms-left-slide" @click="clickMms({{$item}}, true)">
                            <image class="left-mms-image" object-fit="fill" src="{{$item.msgUriPath}}"></image>
                            <text class="mms-slide-text" if="{{$item.content!=''}}">
                                <msghighlight text="{{$item.content}}" keyword="{{searchContent}}" @click-highlights="clickHighlights"></msghighlight>
                            </text>
                        </div>
                        <div class="mms-time-star">
                        <!--发送时间-->
                            <text class="mms-time" id="time_id">{{$item.time}}</text>
                            <image class="mms-card-left" show="{{cardImage}}" src="
                                    {{$item.subId == 0 ? '/common/icon/icon_mms_sim_1.svg' : '/common/icon/icon_mms_sim_2.svg'}}"></image>
                        <!--锁定-->
                            <image class="mms-lock-left" src="/common/icon/msg_lock.svg" show="{{$item.isLock}}"/>
                        </div>
                    </div>
                <!--信息checkbox-->
                    <input id="conversation_checkbox" class="mms-input" type="checkbox" show="{{isSelectStatus}}" checked="{{$item.isCbChecked}}"
                           onchange="listCheckBoxChange({{$idx}})"/>
                </div>
                <div if="{{$idx == mmsList.length-1 && isSendStatus}}" class="empty-list-item"></div>
            </div>
        <!--发信息Item-->
            <div elif="{{!$item.isReceive && !$item.isDraft}}" class="mms-send" onclick="detail({{$item}})">
            <!--短信/彩信-->
                <text class="msg-note-mms" show="{{$idx == 0}}"
                        >{{$t('strings.msg_note_mms')}}</text>
            <!--时间-->
                <text if="{{!mmsDateSet.has($item.date) && mmsDateSet.add($item.date)}}" class="mms-send-date"
                      id="date_id" show="{{isLessOneDay}}"
                        >{{$item.date}}
                </text>
                <div class="mms-status-content">
                    <div class="mms-status">
                        <div class="sending-status-and-content-div">
                        <!--发送失败icon-->
                            <div class="image-45" if="{{$item.isMsm && ((contactsNum == 1 && $item.sendStatus == 2) || (contactsNum > 1 && $item.failuresNumber > 0))}}">
                                <image id="mms-sending_failed" src="/common/icon/ic_send_fail.svg"
                                       class="image-sending-failed" @click="resendOpen({{$idx}})"/>
                            </div>
                        <!--信息/复选框-->
                            <div class="mms-send-text" if="{{$item.msgShowType==0||$item.msgShowType==4}}">
                            <!--图片-->
                                <image if="{{$item.msgType==1}}" src="{{$item.msgUriPath}}" class="mms-img-base mms-image"
                                       onclick="showMsgImage({{$idx}})" object-fit="fill"/>
                            <!--音频-->
                                <div if="{{$item.msgType==3}}" onclick="playMsgAudio({{$idx}})" class="mms-edit-area-audio"
                                     style="width: 150px;">
                                    <image src="/common/icon/ic_voice_left.svg" class="mms-edit-audio-delete"/>
                                    <text class="mms-edit-audio-text"> {{$item.audioTime}}</text>
                                </div>
                            <!--视频-->
                                <div if="{{$item.msgType==2}}" onclick="showVideoOperation({{$idx}})">
                                    <image class="mms-video-base" src="{{$item.msgUriPath}}"/>
                                    <image class="mms-video-tag" src="/common/icon/ic_play_tag.svg"/>
                                </div>
                                <div if="{{$item.msgType==5}}" class="mms-edit-card">
                                    <image src="/common/icon/msg_contacts.svg" class="edit-card-img"/>
                                    <div class="mms-edit-card-item">
                                        <text class="mms-edit-card-text">{{$item.msgUriPath}}</text>
                                        <text class="mms-edit-card-text" if="{{$item.audioTime!=''}}">{{$item.audioTime}}</text>
                                    </div>
                                </div>
                            <!--文本-->
                                <div class="text-and-send-fail">
                                    <div class="image-sending-failed-container" @click="resendOpen({{$idx}})"
                                         if="{{!$item.isMsm && ((contactsNum == 1 && $item.sendStatus == 2) || (contactsNum > 1 && $item.failuresNumber > 0 && $item.completeNumber == contactsNum))}}">
                                        <image id="mms-sending_failed" src="/common/icon/ic_send_fail.svg"
                                               class="image-sending-failed"/>
                                    </div>
                                    <text if="{{$item.content != ''}}" class="mms-text-right mms-text-base" id="right_content"
                                          onclick="intentTextSelect({{$idx}})">
                                        <msghighlight text="{{$item.content}}" keyword="{{searchContent}}" @click-highlights="clickHighlights"></msghighlight>
                                    </text>
                                </div>
                            </div>
                            <div class="mms-send-text-right-row" elif="{{$item.msgShowType==1||$item.msgShowType==2}}"
                                    @click="clickMms({{$item}}, true)">
                                <image class="ppt-image" src="/common/icon/ppt.svg"></image>
                                <div class="theme-text" if="{{$item.content!=''}}">
                                    <text>
                                        <msghighlight text="{{$item.content}}" keyword="{{searchContent}}" @click-highlights="clickHighlights"></msghighlight>
                                    </text>
                                </div>
                            </div>
                            <div class="mms-right-slide" else @click="clickMms({{$item}}, true)">
                                <image class="mms-image" object-fit="fill" src="{{$item.msgUriPath}}"></image>
                                <text class="mms-slide-text" if="{{$item.content!=''}}">
                                    <msghighlight text="{{$item.content}}" keyword="{{searchContent}}" @click-highlights="clickHighlights"></msghighlight>
                                </text>
                            </div>
                        </div>
                    <!--发送时间、发送状态那行-->
                        <div class="time-deliver">
                            <div>
                            <!--群发详情-->
                                <text if="{{contactsNum > 1 && !$item.isMsm}}" class="mms-send-detail"
                                      onclick="jumpGroupDetail({{$idx}})">{{$t('strings.msg_detail_mms')}}
                                </text>
                                <div if="{{!(recallMessagesFlag && $item.cancelTimeCount > 0)}}">
                                <!--发件时间-->
                                    <text class="mms-send-time" if="{{contactsNum == 1 && $item.sendStatus!=1}}" id="time_id">
                                        {{$item.time}}</text>
                                <!--发件时间-->
                                    <text class="mms-send-time" elif="{{contactsNum > 1 && ($item.completeNumber == contactsNum || $item.isMsm)}}"
                                          id="time_id">{{$item.time}}</text>
                                </div>
                                <image class="mms-card-right" show="{{cardImage}}" src="
                                        {{$item.subId == 0 ? '/common/icon/icon_mms_sim_1.svg' : '/common/icon/icon_mms_sim_2.svg'}}"></image>
                            <!--锁定-->
                                <image class="mms-lock-right" src="/common/icon/msg_lock.svg" show="{{$item.isLock}}"></image>
                            </div>
                        <!--1、设置是否显示2、设置显示后 是否送达-->
                            <div if="{{contactsNum > 1}}" class="mms-deliver">
                                <div class="mms-deliver-div" if="{{recallMessagesFlag && $item.cancelTimeCount > 0}}">
                                    <text class="mms-deliver-interval" id="messageInterval">
                                        {{$t('strings.msg_send_cancel')}}
                                    </text>
                                    <text class="mms-deliver-interval-time" id="messageIntervalTime">
                                        {{ $item.cancelTimeCount }}
                                    </text>
                                </div>
                                <div else>
                                    <text class="mms-deliver-error" id="messageSendFailed" if="{{$item.completeNumber == contactsNum && $item.failuresNumber > 0}}">
                                        {{$t('strings.msg_send_failed')}}{{$item.failuresNumber}}
                                    </text>
                                    <text class="mms-deliver-success" id="messageSending" elif="{{$item.completeNumber < contactsNum && !$item.isMsm}}">
                                        {{$t('strings.messageSending')}} ({{$item.completeNumber+1}}/{{contactsNum}})
                                    </text>
                                </div>
                            </div>
                            <div else class="mms-deliver">
                                <div class="mms-deliver-div" if="{{recallMessagesFlag && $item.cancelTimeCount > 0}}">
                                    <text class="mms-deliver-interval" id="messageInterval">
                                        {{$t('strings.msg_send_cancel')}}
                                    </text>
                                    <text class="mms-deliver-interval-time" id="messageIntervalTime">
                                        {{ $item.cancelTimeCount }}
                                    </text>
                                </div>
                                <div else>
                                    <text class="mms-deliver-error" id="messageSendFailed" if="{{$item.sendStatus==2}}">
                                        {{$t('strings.messageSendFailed')}}
                                    </text>
                                    <text class="mms-deliver-success" id="messageSending" elif="{{$item.sendStatus==1}}">
                                        {{$t('strings.messageSending')}}
                                    </text>
                                </div>
                            </div>
                        </div>
                    </div>
                <!--发件人头像, 群消息时才存在-->
                    <div if="{{contactsNum > 1}}" class="group-head-image-div" @click="jumpToContactsCallingCard">
                        <image src="/common/icon/user_avatar_full_fill.svg" class="group-head-image"></image>
                    </div>
                <!--信息checkbox-->
                    <input id="conversation_checkbox" class="mms-input" type="checkbox" show="{{isSelectStatus}}" checked="{{$item.isCbChecked}}"
                           onchange="listCheckBoxChange({{$idx}})"/>
                </div>
                <div if="{{$idx == mmsList.length-1 && isSendStatus}}" class="empty-list-item"></div>
            </div>
        </list-item>
    </list>
    <!--长按提示-->
    <menu id="menu_long_press" onselected="longPressSelected">
        <option value="0" focusable="false">{{$t('strings.msg_copy')}}</option>
        <option value="1" focusable="false">{{$t('strings.msg_transmit')}}</option>
        <option value="2" focusable="false">{{$t('strings.delete')}}</option>
        <option value="3" focusable="false">{{$t('strings.msg_select_text')}}</option>
        <option value="4" focusable="false">{{$t('strings.more')}}</option>
    </menu>
    <!-- 长按彩信 -->
    <menu id="menu_long_press_mms" onselected="longPressSelected">
        <option value="0" if="{{hasContent}}">{{$t('strings.msg_copy')}}</option>
        <option value="1" focusable="false">{{$t('strings.msg_transmit')}}</option>
        <option value="2" focusable="false">{{$t('strings.delete')}}</option>
        <option value="3" if="{{hasContent}}">{{$t('strings.msg_select_text')}}</option>
        <option value="5" if="{{hasImage}}">{{$t('strings.msg_save')}}</option>
        <option value="4" focusable="false">{{$t('strings.more')}}</option>
    </menu>
    <menu target="group_more_menu" onselected="moreSelected">
        <option value="0" show="{{selectDeleteMsgCount ==1}}" disabled="{{selectDeleteMsgCount == 0 || !hasContent}}">{{$t('strings.msg_copy')}}</option>
        <option value="1" show="{{selectDeleteMsgCount ==1}}">{{$t('strings.share')}}</option>
        <option value="2" show="{{selectDeleteMsgCount ==1}}" disabled="{{!hasContent}}">{{$t('strings.msg_select_text')}}</option>
        <option value="3" show="{{selectDeleteMsgCount !=0 && !hasLock}}">{{$t('strings.lock')}}</option>
        <option value="5" show="{{selectDeleteMsgCount >=1 && hasLock}}">{{$t('strings.unlock')}}</option>
        <option value="8" show="{{selectDeleteMsgCount ==1 && hasVcard}}">{{$t('strings.view_vCard_detail')}}</option>
        <option value="7" show="{{selectDeleteMsgCount ==1 && hasImage}}">{{$t('strings.save_attachments')}}</option>
        <option value="4" show="{{selectDeleteMsgCount ==1}}">{{$t('strings.query_details')}}</option>
        <option value="6" show="{{selectDeleteMsgCount ==1 && hasReport}}">{{$t('strings.query_report')}}</option>
    </menu>
<!--底部发送栏-->
    <div class="msg-sed-bar">
    <!--彩信附件预览编辑显示区域(图片/视频/音频)-->
        <list id="mms_edt_list" class="mms-edit-area" show="{{mmsEditList.length!=0}}"
              style="height:{{isOnlyAudio ? 100:180}}px;">
            <list-item for="{{mmsEditList}}">
            <!--音频-->
                <div if="{{$item.type==3}}" onclick="playAudio({{$idx}})" class="mms-audio-container">
                    <div class="mms-edit-area-audio">
                        <image src="/common/icon/ic_voice_left.svg" class="mms-edit-audio-delete"/>
                        <text class="mms-edit-audio-text">{{$item.time}}</text>
                        <image src="/common/icon/ic_cancel.svg" class="mms-edit-audio-delete" onclick="deletePreview({{$idx}})"/>
                    </div>
                    <text class="subscript" if="{{messageType==2||messageType==3}}">{{$item.index}}/{{pptTotalCount}}</text>
                </div>
                <div class="mms-edit-card" elif="{{$item.type==5}}">
                    <image src="/common/icon/msg_contacts.svg" class="edit-card-img"/>
                    <div class="mms-edit-card-item">
                        <text class="mms-edit-card-text">{{$item.uriPath}}</text>
                        <text class="mms-edit-card-text" if="{{$item.time!=''}}">{{$item.time}}</text>
                    </div>
                    <image src="/common/icon/ic_cancel.svg" class="mms-edit-delete" onclick="deletePreCard"/>
                </div>
            <!--图片/视频-->
                <div else class="mms-image-container">
                    <div class="mms-edit-area-image">
                        <image class="mms-edit-area-image-bg" src="{{$item.uriPath}}"
                               onclick="showEdtImage({{$item.type}} ,{{$idx}})"/>
                        <image src="/common/icon/ic_cancel.svg" class="mms-edit-delete" onclick="deletePreview({{$idx}})"/>
                    </div>
                    <text class="subscript" if="{{messageType==2||messageType==3}}">{{$item.index}}/{{pptTotalCount}}</text>
                </div>
            </list-item>
        </list>
        <!--底部发送栏-->
        <div class="send-bar" if="{{!isSelectStatus}}" style="margin-bottom: {{sendBarMarginBottom}}px;">
        <!--左侧更多和全屏显示-->
            <div class="{{isShowFullScreen?'full-screen-mores-true':'full-screen-mores-false'}}">
            <!--全屏-->
                <image src="/common/icon/msg_full_screen.svg" class="style-full-screen-more-full" show="{{isShowFullScreen}}"
                       onclick="jumpFullScreen"/>
            <!--加号(添加附件)-->
                <div class="add-div">
                    <image id="add-attachment-icon" src="/common/icon/msg_add.svg" class="style-full-screen-more-more" onclick="msgSendBarMore"/>
                </div>
            </div>
        <!--输入框-->
            <div class="bottom-input">
                <div id="bottom-input-image" class="bottom-input-image" show="{{cardImage}}">
                    <image class="bottom-card"
                           src="{{slotId==0 ? '/common/icon/icon_card.svg' : '/common/icon/icon_card_2.svg'}}">
                    </image>
                    <image class="down-image" src="/common/icon/icon_down.svg"></image>
                </div>
                <div show="{{messageType==0}}">
                    <textarea id="isInputMethod" data="{{textValue}}" ref="textArea" extend="true" value="{{textValue}}"
                              ontouchstart="touchChange" onchange="changeValue" class="send-bar-input"
                              placeholder="{{isEditMms?$t('strings.msg_note_mms2'):$t('strings.msg_note_mms')}}"
                              @share="shareTextAtTextarea" @search="searchTextAtTextarea"></textarea>
                </div>
                <div show="{{messageType!=0}}" class="text-container">
                    <block for="{{ textareaDatasource }}">
                        <div style="flex-direction:row;">
                            <textarea id="input-{{$idx}}" class="send-bar-input" extend="true" value="{{$item.textValue}}"
                                      ontouchstart="touchChange" onchange="changeMmsValue"
                                      placeholder="{{$item.placeholder}}"  @focus="focus({{$item}}, {{$idx}})" @blur="blur"></textarea>
                            <text class="slide-counter" if="{{$item.pptIndex!==0}}">{{$item.pptIndex}}/{{pptTotalCount}}</text>
                        </div>
                        <divider if="{{$idx!=textareaDatasource.length-1}}" class="textarea-divider"></divider>
                    </block>
                </div>
            </div>
            <!--发送-->
            <div class="send-button-text">
            <!--信息提示-->
                <text class="send-text-size" if="{{textValue.length !=0 || isEditMms }}">{{msgSendTip}}</text>
                <text class="send-text-size" else>{{''}}</text>
            <!--发送按钮-->
                <div class="send-img-container" onclick="send">
                    <image id="send-icon" src="{{canSendMessage ? '/common/icon/send_green.svg' : '/common/icon/send.svg'}}" class="send-bar-send"/>
                </div>
            </div>
        </div>
        <!--底部更多选项 -->
        <div class="send-bar-details-more" if="{{isSelectStatus && !hasDetailDelete}}">
        <!--删除-->
            <div class="send-msg-detail" onclick="clickGroupDelete" id="send_msg_delete"
                 style="opacity: {{selectDeleteMsgCount==0? 0.5:1}};">
                <image class="send-bar-detail-image" src="{{$t('svg.delete')}}"/>
                <text class="send-bar-detail-text">{{$t('strings.delete')}}</text>
            </div>
        <!--转发-->
            <div class="send-msg-detail" onclick="clickGroupTransmit"
                 style="opacity: {{selectDeleteMsgCount==0 || selectDeleteMsgCount > 30 ? 0.5:1}};">
                <image class="send-bar-detail-image" src="{{$t('svg.transfer')}}"/>
                <text class="send-bar-detail-text">{{$t('strings.msg_transmit')}}</text>
            </div>
        <!--收藏-->
            <div class="send-msg-detail" onclick="clickGroupStar"
                 style="opacity: {{selectDeleteMsgCount==0 || selectDeleteMsgCount > 30 ? 0.5:1}};">
                <image class="send-bar-detail-image" src="{{$t('svg.favorites.unselected')}}"/>
                <text class="send-bar-detail-text">{{$t('strings.msg_star')}}</text>
            </div>
        <!--全选-->
            <div class="send-msg-detail" onclick="clickGroupCheckAll" id="send_msg_select_all">
                <image class="send-bar-detail-image"
                       src="{{isMessageCheckAll ? '/common/icon/ic_select_all_filled.svg' :
                               '/common/icon/ic_select_all.svg'}}"/>
                <text class="send-bar-detail-text" style="color:{{isMessageCheckAll ? '#007DFF':'#2C2C2C'}}">
                    {{isMessageCheckAll ? $t('strings.msg_deselect_all') : $t('strings.msg_select_all')}}
                </text>
            </div>
        <!--更多-->
            <div class="send-msg-detail" onclick="clickGroupMore" id="group_more_menu">
                <image class="send-bar-detail-image" src="{{$t('svg.more')}}"/>
                <text class="send-bar-detail-text">{{$t('strings.more')}}
                </text>
            </div>
        </div>
        <div class="send-bar-details-more-delete" elif="{{isSelectStatus && hasDetailDelete}}">
        <!--删除-->
            <div class="send-msg-detail" onclick="clickGroupDelete" id="send_msg_delete"
                 style="opacity: {{selectDeleteMsgCount==0? 0.5:1}};">
                <image class="send-bar-detail-image" src="{{$t('svg.delete')}}"/>
                <text class="send-bar-detail-text">{{$t('strings.delete')}}
                </text>
            </div>
        <!--全选-->
            <div class="send-msg-detail" onclick="clickGroupCheckAll" id="send_msg_select_all">
                <image class="send-bar-detail-image"
                       src="{{isMessageCheckAll ? '/common/icon/ic_select_all_filled.svg' :
                        '/common/icon/ic_select_all.svg'}}"/>
                <text class="send-bar-detail-text" style="color:{{isMessageCheckAll ? '#007DFF':'#2C2C2C'}}">
                    {{isMessageCheckAll ? $t('strings.msg_deselect_all') : $t('strings.msg_select_all')}}
                </text>
            </div>
        </div>
    </div>
    <!--tab卡栏目-->
    <div class="media-swipe-div" style="height: {{tabHeight}}px;" show="{{isShowMoreOperation}}"
         @touchstart="tabSlideStart" @touchmove="tabSlideMove" @touchend="tabSlideEnd" @swipe="tabSwipe">
        <tabs id="media_tabs" index="{{tabIndex}}" vertical="false" onchange="changeTabs">
            <tab-content class="tab-content" scrollable="{{tabSlideStatus==0}}">
            <!--相机Page/拍摄照片-->
                <div class="item-content">
                    <div class="item-content-div">
                        <text class="item-title">{{$t('strings.msg_take_photos')}}</text>
                    </div>
                </div>

            <!--图片Page-->
                <div class="item-image">
                    <div class="item-image">
                        <list class="picture-list">
                        <!--图库icon-->
                            <list-item class="picture-item-first" @click="clickToJumpToGallery">
                                <image src="{{ $t('svg.gallery') }}" class="tab-bar-status-image"
                                        />
                                <text class="send-bar-detail-text">{{ $t('strings.msg_gallery') }}</text>
                            </list-item>

                        <!--图库图标之后的图片-->
                            <list-item class="picture-item" for="{{ pictureListFromGallery }}"
                                       @click="clickToSelectPictureOnFullScreen({{ $idx }})">
                                <image class="picture-item-image" src="{{ $item.path }}"/>

                            <!--checkbox，所有图片都有-->
                                <image class="picture-item-checkbox" id="picture_item_checkbox"
                                       src="{{ $item.checkedValue ? $t('svg.checkbox_on') : $t('svg.checkbox_off') }}"
                                       @click="pictureItemCheckboxOnchange({{ $idx }})">
                                </image>

                            <!--播放icon，只有视频有-->
                                <image class="video-play-icon" if="{{ $item.type == 2 }}" src="{{ $t('svg.video_flag') }}"></image>
                            </list-item>
                        </list>
                    </div>
                </div>
            <!--录音Page-->
                <div class="item-recording" id="item_recording">
                    <text class="tabs-recording-time {{isRecordingStatus ? 'visibility-visible' : 'visibility-hidden'}}">{{curRecordingTime}}</text>
                    <stack class="recording-container">
                        <div id="recording"></div>
                        <div class="image-background"></div>
                        <image class="tabs-recording-image" id="press_to_recording"
                               ontouchstart="recordingStart" ontouchend="recordingEnd"
                               src="/common/icon/ic_voice.svg"/>
                    </stack>
                    <text class="tabs-recording-text {{isRecordingStatus ? 'visibility-hidden' : 'visibility-visible'}}">{{$t('strings.press_speak')}}</text>
                </div>
            <!--更多-->
                <div class="item-content-more">
                <!--第1行-->
                    <div class="item-content-vcards">
                    <!--联系人-->
                        <div class="item-content-vcard" @click="clickToSelectContact">
                            <image id="vCard-image" src="/common/icon/msg_contacts.svg" class="tab-bar-image"/>
                            <text class="vcard-title">{{$t('strings.msg_contacts')}}</text>
                        </div>
                    <!--日程-->
                        <div class="item-content-vcard">
                            <image id="vCard-image" src="/common/icon/msg_schedule.svg" class="tab-bar-image"/>
                            <text class="vcard-title">{{$t('strings.msg_schedule')}}</text>
                        </div>
                    <!--音乐-->
                        <div class="item-content-vcard">
                            <image id="vCard-image" src="/common/icon/msg_music.svg" class="tab-bar-image"/>
                            <text class="vcard-title">{{$t('strings.msg_music')}}</text>
                        </div>
                    <!--主题-->
                        <div class="item-content-vcard" @click="cliclToSelectSubject">
                            <image id="vCard-image" src="/common/icon/msg_theme.svg" class="tab-bar-image"/>
                            <text class="vcard-title">{{$t('strings.msg_theme')}}</text>
                        </div>
                    </div>
                <!--第2行-->
                    <div class="item-content-vcards">
                    <!--幻灯片-->
                        <div class="item-content-vcard-slide-show" @click="cliclToSelectSlide">
                            <image id="vCard-image" src="/common/icon/msg_ppt.svg" class="tab-bar-image"/>
                            <text class="vcard-title">{{$t('strings.msg_slide')}}</text>
                        </div>
                    </div>
                </div>
            </tab-content>
        <!--底部栏-->
            <tab-bar if="{{tabSlideStatus!=2}}" class="tab-bar" mode="fixed">
            <!--拍摄-->
                <div class="tab-bar-status" id="tab_bar_camera">
                    <image src="{{tabIndex==0?'/common/icon/msg_camera_true.svg': '/common/icon/msg_camera_false.svg'}}"
                           class="tab-bar-status-image"/>
                    <text class="send-bar-detail-text" style="color:{{tabIndex==0?'#007DFF':'#2C2C2C'}}">
                        {{tabTextList[0]}}</text>
                </div>
            <!--图片-->
                <div class="tab-bar-status" id="tab_bar_picture">
                    <image src="{{tabIndex==1? '/common/icon/msg_picture_true.svg':'/common/icon/msg_picture_false.svg'}}"
                           class="tab-bar-status-image"/>
                    <text class="send-bar-detail-text" style="color:{{tabIndex==1? '#007DFF':'#2C2C2C'}}">
                        {{tabTextList[1]}}</text>
                </div>
            <!--录音-->
                <div class="tab-bar-status" id="tab_bar_recording">
                    <image src="{{tabIndex==2? '/common/icon/msg_recording_true.svg':'/common/icon/msg_recording_false.svg'}}"
                           class="tab-bar-status-image"/>
                    <text class="send-bar-detail-text" style="color:{{tabIndex==2? '#007DFF':'#2C2C2C'}}">
                        {{tabTextList[2]}}
                    </text>
                </div>
            <!--更多-->
                <div class="tab-bar-status" id="tab_bar_more">
                    <image src="{{tabIndex==3? '/common/icon/msg_more_true.svg':'/common/icon/msg_more_false.svg'}}"
                           class="tab-bar-status-image"/>
                    <text class="send-bar-detail-text" style="color:{{tabIndex==3? '#007DFF':'#2C2C2C'}}">
                        {{tabTextList[3]}}
                    </text>
                </div>
            </tab-bar>
        </tabs>
    </div>
<!--删除对话框-->
    <dialog id="delete_dialog">
        <div class="delete-dialog-div">
            <text class="{{ hasLockMsg ? 'dialog-inner-text2': 'dialog-inner-text1'}}">{{strMsgDeleteDialogTip}}</text>
            <div class="dialog-inner-cb" show="{{hasLockMsg}}">
                <input class="mms-input" type="checkbox" checked="{{isSelectLockMsg}}"
                       onchange="setSelectLockStatus()"/>
                <text class="dialog-inner-cb-text" onclick="deleteDialogConfirm">
                    {{$t('strings.msg_delete_dialog_cb_tip')}}
                </text>
            </div>
            <div class="dialog-inner-logic">
                <text class="dialog-inner-logic-cancel" onclick="deleteDialogCancel">
                    {{$t('strings.msg_delete_dialog_cancel')}}
                </text>
                <div class="dialog-inner-logic-vertical"></div>
                <text class="dialog-inner-logic-delete" onclick="deleteDialogConfirm">
                    {{$t('strings.delete')}}</text>
            </div>
        </div>
    </dialog>
<!--提示对话框-->
    <dialog id="tip_dialog">
        <div class="delete-dialog-div">
            <text class="dialog-tips ">{{$t('strings.tips')}}</text>
            <text class="dialog-inner-text2"> {{$t('strings.tips_replace')}}</text>
            <div class="dialog-inner-logic">
                <text class="dialog-inner-logic-cancel" onclick="tipDialogCancel">
                    {{$t('strings.msg_delete_dialog_cancel')}}
                </text>
                <div class="dialog-inner-logic-vertical"></div>
                <text class="dialog-inner-logic-confirm" onclick="tipDialogConfirm">
                    {{$t('strings.confirm')}}</text>
            </div>
        </div>
    </dialog>
<!--发送联系人附件时，会弹出dialog让用户选择该联系人是以文本形式发送还是以彩信vCard形式发送-->
    <dialog id="select_text_or_vcard_to_send_dialog">
        <div class="text-or-vcard-dialog">
            <div class="text-or-vcard-dialog-item">
                <text style="font-size: 45px; font-weight: 500;">{{$t('strings.contact')}}</text>
            </div>
            <div class="text-or-vcard-dialog-item" style="border-bottom: 1px solid grey;" @click="clickToSelectText">
                <text>{{$t('strings.text')}}</text>
            </div>
            <div class="text-or-vcard-dialog-item" @click="clickToSelectVcard">
                <text>{{$t('strings.mmsVcard')}}</text>
            </div>
            <div class="text-or-vcard-dialog-item" style="justify-content: center;" @click="clickToCloseVcardDialog">
                <text style="color: #007DFF;">{{$t('strings.cancel')}}</text>
            </div>
        </div>
    </dialog>
<!--发送幻灯片附件时，会弹出dialog让用户选择是否添加幻灯片-->
    <dialog id="slide_dialog">
        <div style="flex-direction: column;">
            <div class="text-or-vcard-dialog-item">
                <text style="font-size: 45px; font-weight: 500;">{{$t('strings.msg_slide')}}</text>
            </div>
            <div class="text-or-vcard-dialog-item" if="{{messageType==2 || messageType==3}}" @click="clickToPreviewSlide">
                <text>{{$t('strings.slide_preview')}}</text>
            </div>
            <div class="text-or-vcard-dialog-item" @click="clickToAddSlide">
                <text>{{$t('strings.addSlide')}}</text>
            </div>
            <div class="text-or-vcard-dialog-item" if="{{messageType==2 || messageType==3}}" @click="clickToDeleteSlide">
                <text>{{$t('strings.delete_slide')}}</text>
            </div>
            <div class="text-or-vcard-dialog-item" if="{{messageType==2 || messageType==3}}" @click="clickToShowDurationDialog">
                <text>{{$t('strings.slide_duration')}}({{slideDuration}}{{$t('strings.slide_duration_unit')}})</text>
            </div>
            <div class="text-or-vcard-dialog-item" style="justify-content: center;" @click="clickToCloseSlideDialog">
                <text style="color: #007DFF;">{{$t('strings.cancel')}}</text>
            </div>
        </div>
    </dialog>
<!--信息详情弹窗-->
    <dialog id="mms_details_dialog">
        <div class="mms-details">
        <!--信息详情-->
            <text class="mms-details-title">{{$t('strings.msgDetails')}}</text>
        <!--信息类型-->
            <text class="mms-details-text">{{$t('strings.type')}}{{isMmsType}}</text>
        <!--收/发件人号码-->
            <text class="mms-details-text">{{isSendRecipient ? $t('strings.sendAddresser') : $t('strings.putAddresser')}}{{strContactsNumberFormat}}</text>
        <!--收/发时间-->
            <text class="mms-details-text">{{$t('strings.sendTime')}}{{mmsTime}}</text>
            <text class="mms-details-text" show="false">{{$t('strings.serviceCenter')}}+8613010305500</text>
            <text class="mms-details-text" show="{{isSendRecipient}}">{{$t('strings.putTime')}}{{mmsTime}}</text>
            <text class="mms-details-cancel" onclick="mmsDetailsCancel">{{$t('strings.ok')}}</text>
        </div>
    </dialog>
<!--信息发送失败重新发送dialog弹窗-->
    <dialog id="mms_fail_dialog">
        <div class="fail_dialog">
        <!--标题-->
            <div class="fail_text">
                <text class="fail_text_title">{{ $t('strings.msg_resend_prompt') }}</text>
            </div>
        <!--底部按钮-->
            <div class="fail_button">
                <button type="text" value="{{ $t('strings.cancel') }}" onclick="cancelResend"
                        class="btn_cancel_double"></button>
                <divider class="fail_divider" vertical="true"></divider>
                <button type="text" value="{{ $t('strings.msg_resend') }}" onclick="resend"
                        class="btn_restore_double">
                </button>
            </div>
        </div>
    </dialog>
<!--    高亮电话事件-->
    <dialog id="highlightDialog">
        <highlightdialog text="{{highlightsText}}" highlightsType="{{highlightsType}}" @cancel-dialog="cancelHighlightDialog" @click-action="clickHighlightsDialogCell"></highlightdialog>
    </dialog>

    <dialog id="slideDurationDialog">
        <div style="flex-direction: column;">
            <div class="text-or-vcard-dialog-item">
                <text class="text-font-40">{{$t('strings.slide_duration_title')}}</text>
            </div>
            <list>
                <list-item for="{{slideDurations}}">
                    <div class="list-item-size" @click="chooseSlideDuration({{$item}})">
                        <text class="text-font-28">{{$item}} {{$t('strings.slide_duration_unit')}}</text>
                    </div>
                </list-item>
            </list>
        </div>
    </dialog>
</div>
